subroutine initial_file
    use global
    implicit none

    open(101,file="task.inp")
    write(101,"(A)")"*Heading"
    write(101,"(A)")"** Job name: Job-1 Model name: Truss"
    write(101,"(A)")"** Generated by: Abaqus/CAE 2022"
    write(101,"(A)")"*Preprint, echo=NO, model=NO, history=NO, contact=NO"
    write(101,"(A)")"**"
    write(101,"(A)")"** PARTS"
    write(101,"(A)")"**"
    write(101,"(A)")"*Part, name=TRUSS"
    write(101,"(A)")"*Node"
    write(101,"(A)")"      1,           0.,           0."
    write(101,"(A)")"      2,           0.,         100."
    write(101,"(A)")"      3,         100.,         100."
    write(101,"(A)")"      4,        -100.,         100."
    write(101,"(A)")"*Element, type=T2D2"
    write(101,"(A)")"1, 1, 2"
    write(101,"(A)")"2, 1, 3"
    write(101,"(A)")"3, 1, 4"
    write(101,"(A)")"*Nset, nset=SET-1"
    write(101,"(A)")" 1, 3, 4"
    write(101,"(A)")"*Elset, elset=SET-1"
    write(101,"(A)")" 2, 3"
    write(101,"(A)")"*Nset, nset=SET-2"
    write(101,"(A)")" 1, 2"
    write(101,"(A)")"*Elset, elset=SET-2"
    write(101,"(A)")" 1,"
    write(101,"(A)")"** Section: Section-1-SET-2"
    write(101,"(A)")"*Solid Section, elset=SET-2, material=TRUSS2"
    write(101,"(F18.12,A)")area_2,"," !area_2
    write(101,"(A)")"** Section: Section-2-SET-1"
    write(101,"(A)")"*Solid Section, elset=SET-1, material=TRUSS1_3"
    write(101,"(F18.12,A)")area_1,"," !area_1
    write(101,"(A)")"*End Part"
    write(101,"(A)")"**  "
    write(101,"(A)")"**"
    write(101,"(A)")"** ASSEMBLY"
    write(101,"(A)")"**"
    write(101,"(A)")"*Assembly, name=Assembly"
    write(101,"(A)")"**  "
    write(101,"(A)")"*Instance, name=TRUSS-1, part=TRUSS"
    write(101,"(A)")"*End Instance"
    write(101,"(A)")"**  "
    write(101,"(A)")"*Nset, nset=SET-1, instance=TRUSS-1, generate"
    write(101,"(A)")" 2,  4,  1"
    write(101,"(A)")"*Nset, nset=SET-2, instance=TRUSS-1"
    write(101,"(A)")" 1,"
    write(101,"(A)")"*Nset, nset=SET-3, instance=TRUSS-1"
    write(101,"(A)")" 1,"
    write(101,"(A)")"*Nset, nset=SET-4, instance=TRUSS-1"
    write(101,"(A)")" 1,"
    write(101,"(A)")"*Nset, nset=Set-5, instance=TRUSS-1"
    write(101,"(A)")" 1,"
    if(load_case.ne.3)then
        write(101,"(A)")"*Nset, nset=Set-6, instance=TRUSS-1"
        write(101,"(A)")" 1,"
    endif
    write(101,"(A)")"*End Assembly"
    write(101,"(A)")"** "
    write(101,"(A)")"** MATERIALS"
    write(101,"(A)")"** "
    write(101,"(A)")"*Material, name=TRUSS1_3"
    write(101,"(A)")"*Density"
    write(101,"(F18.12,A)")rho_1,","
    write(101,"(A)")"*Elastic"
    write(101,"(A)")" 0.0021,0."
    write(101,"(A)")"*Material, name=TRUSS2"
    write(101,"(A)")"*Density"
    write(101,"(F18.12,A)")rho_2,","
    write(101,"(A)")"*Elastic"
    write(101,"(A)")" 0.0021,0."
    write(101,"(A)")"** "
    write(101,"(A)")"** BOUNDARY CONDITIONS"
    write(101,"(A)")"** "
    write(101,"(A)")"** Name: Disp-BC-1 Type: Displacement/Rotation"
    write(101,"(A)")"*Boundary"
    write(101,"(A)")"SET-1, 1, 1"
    write(101,"(A)")"** Name: Disp-BC-2 Type: Displacement/Rotation"
    write(101,"(A)")"*Boundary"
    write(101,"(A)")"SET-1, 2, 2"
    write(101,"(A)")"** ----------------------------------------------------------------"
    write(101,"(A)")"**"
    write(101,"(A)")"** STEP: Step-1"
    write(101,"(A)")"** "
    write(101,"(A)")"*Step, name=Step-1, nlgeom=NO"
    write(101,"(A)")"*Static"
    write(101,"(A)")"1., 1., 1e-05, 1."
    write(101,"(A)")"** "
    write(101,"(A)")"** LOADS"
    write(101,"(A)")"** "
    write(101,"(A)")"** Name: Load-1   Type: Concentrated force"
    write(101,"(A)")"*Cload"
    if(load_case.eq.1)then
        write(101,"(A)")"Set-6, 1, -1414."
        write(101,"(A)")"Set-6, 2, -1414."
    elseif(load_case.eq.2)then
        write(101,"(A)")"Set-6, 1, 1414."
        write(101,"(A)")"Set-6, 2, -1414."
    elseif(load_case.eq.3)then
        write(101,"(A)")"Set-5, 2, -2000."
    endif
    write(101,"(A)")"** "
    write(101,"(A)")"** OUTPUT REQUESTS"
    write(101,"(A)")"** "
    write(101,"(A)")"*Restart, write, frequency=0"
    write(101,"(A)")"** "
    write(101,"(A)")"** FIELD OUTPUT: F-Output-1"
    write(101,"(A)")"** "
    write(101,"(A)")"*Output, field, variable=PRESELECT"
    write(101,"(A)")"*EL print"
    write(101,"(A)")"S11"
    write(101,"(A)")"** "
    write(101,"(A)")"** HISTORY OUTPUT: H-Output-1"
    write(101,"(A)")"** "
    write(101,"(A)")"*Output, history, variable=PRESELECT"
    write(101,"(A)",advance = 'no')"*End Step"
    close(101)

    call system("cp batchfile\RunAbaqus.bat .\RunAbaqus.bat ")

end subroutine initial_file